(this.webpackJsonpreact_frontend=this.webpackJsonpreact_frontend||[]).push([[0],{11:function(t,e,a){t.exports=a(21)},16:function(t,e,a){},18:function(t,e,a){},21:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(9),o=a.n(i),s=(a(16),a(6)),c=a.n(s),u=a(10),l=a(7),d=a(1),h=a(2),p=a(3),m=a(4),f=(a(18),a(5)),b=a.n(f),g=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).canvasElementRef=r.a.createRef(),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.chartData={labels:[],datasets:[{label:"liczba zachorowa\u0144",data:[],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y-axis-1"},{label:"wzrost",data:[],backgroundColor:"rgba(132, 99, 255, 0.2)",borderColor:"rgba(132, 99, 255, 1)",borderWidth:1,yAxisID:"y-axis-2"}]},this.chart=new b.a(this.canvasElementRef.current,{type:"line",data:this.chartData,options:{scales:{yAxes:[{type:"linear",beginAtZero:!0,position:"left",id:"y-axis-1"},{type:"linear",beginAtZero:!0,position:"right",id:"y-axis-2"}]}}})}},{key:"componentDidUpdate",value:function(){this.chartData.labels=this.props.regionData.map((function(t){return"".concat(t.date.getFullYear(),"-").concat(t.date.getMonth()+1,"-").concat(t.date.getDate())})),this.chartData.datasets[0].data=this.props.regionData.map((function(t){return t.count}));var t=[null];this.props.regionData.reduce((function(e,a){return t.push(a.count-e.count),a})),this.chartData.datasets[1].data=t,this.chart.update()}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvasElementRef})}}]),a}(r.a.Component),k=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).canvasElementRef=r.a.createRef(),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.chartData={labels:[],datasets:[{label:"liczba zgon\xf3w",data:[],backgroundColor:"rgba(0, 0, 0, 0.2)",borderColor:"rgba(0, 0, 0, 0.9)",borderWidth:1},{label:"wzrost",data:[],backgroundColor:"rgba(99, 255, 132, 0.2)",borderColor:"rgba(99, 255, 132, 1)",borderWidth:1,yAxisID:"y-axis-2"}]},this.chart=new b.a(this.canvasElementRef.current,{type:"line",data:this.chartData,options:{scales:{yAxes:[{type:"linear",beginAtZero:!0,position:"left",id:"y-axis-1"},{type:"linear",beginAtZero:!0,position:"right",id:"y-axis-2"}]}}})}},{key:"componentDidUpdate",value:function(){this.chartData.labels=this.props.regionData.map((function(t){return"".concat(t.date.getFullYear(),"-").concat(t.date.getMonth()+1,"-").concat(t.date.getDate())})),this.chartData.datasets[0].data=this.props.regionData.map((function(t){return t.deaths}));var t=[null];this.props.regionData.reduce((function(e,a){return t.push(a.deaths-e.deaths),a})),this.chartData.datasets[1].data=t,this.chart.update()}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvasElementRef})}}]),a}(r.a.Component),v=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(d.a)(this,a),(t=e.call(this)).state={regionId:"",regionData:[],regions:[{id:"t02",name:"dolno\u015bl\u0105skie"},{id:"t04",name:"kujawsko-pomorskie"},{id:"t06",name:"lubelskie"},{id:"t08",name:"lubuskie"},{id:"t10",name:"\u0142\xf3dzkie"},{id:"t12",name:"ma\u0142opolskie"},{id:"t14",name:"mazowieckie"},{id:"t16",name:"opolskie"},{id:"t18",name:"podkarpackie"},{id:"t20",name:"podlaskie"},{id:"t22",name:"pomorskie"},{id:"t24",name:"\u015bl\u0105skie"},{id:"t26",name:"\u015bwi\u0119tokrzyskie"},{id:"t28",name:"warmi\u0144sko-mazurskie"},{id:"t30",name:"wielkopolskie"},{id:"t32",name:"zachodniopomorskie"}]},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(t,e){this.state.regionId!==e.regionId&&this.fetchData()}},{key:"totalCount",value:function(){return Math.max.apply(Math,Object(l.a)(this.state.regionData.map((function(t){return t.count}))))}},{key:"deathsCount",value:function(){return Math.max.apply(Math,Object(l.a)(this.state.regionData.map((function(t){return t.deaths}))))}},{key:"onChangeRegion",value:function(t){this.setState({regionId:t.target.value})}},{key:"fetchData",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,a,n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat("https://koronawirus.herokuapp.com","/total/"),this.state.regionId&&(e+="".concat(this.state.regionId,"/")),t.next=4,fetch(e);case 4:return a=t.sent,t.next=7,a.json();case 7:n=t.sent,r=n.map((function(t){return{date:new Date(t._id),deaths:t.deaths,count:t.count}})).sort((function(t,e){return t.date.valueOf()-e.date.valueOf()})),this.setState({regionData:r});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.regions.map((function(t){return r.a.createElement("option",{key:t.id,value:t.id},t.name)}));return t.unshift(r.a.createElement("option",{value:"",key:"t00"},"Ca\u0142a Polska")),r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",{class:"header-section"},"Koronawirus w Polsce"),r.a.createElement("div",{class:"header-section number-tiles"},"Total: ",this.totalCount()),r.a.createElement("div",{class:"header-section number-tiles"},"Deaths: ",this.deathsCount()),r.a.createElement("div",{class:"header-section"},r.a.createElement("select",{id:"region",onChange:this.onChangeRegion.bind(this),value:this.state.regionId},t))),r.a.createElement(g,{regionData:this.state.regionData}),r.a.createElement(k,{regionData:this.state.regionData}))}}]),a}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.a161e183.chunk.js.map